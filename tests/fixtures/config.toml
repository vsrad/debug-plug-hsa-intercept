[agent]
log = "-"

[debug-buffer]
size = 1048576
dump-file = "tests/tmp/debug_buffer"

[code-object-dump]
log = "-"
directory = "tests/tmp/"

[[code-object-swap]]
when-crc = 0xDEADBEEF
load-file = "replacement.co"

[[code-object-swap]]
when-call-count = 1
load-file = "tests/tmp/replacement.co"
exec-before-load = """bash -o pipefail -c '\
  perl tests/fixtures/breakpoint.pl -ba $ASM_DBG_BUF_ADDR -bs $ASM_DBG_BUF_SIZE \
    -l 31 -w v[tid] -s 96 -r s0 -t 0 tests/kernels/dbg_kernel.s \
  | /opt/rocm/opencl/bin/x86_64/clang -x assembler -target amdgcn--amdhsa -mcpu=gfx900 -mno-code-object-v3 \
    -Itests/kernels/include -o tests/tmp/replacement.co -'"""
